# CSV Processor

Скрипт для обработки CSV-файлов с поддержкой фильтрации и агрегации.

## Возможности
- Фильтрация по одной колонке с операторами `=`, `>`, `<` (поддерживаются числовые и строковые значения)
- Агрегация по одной числовой колонке: среднее (`avg`), минимум (`min`), максимум (`max`)
- Красивый вывод таблицы в консоль (используется библиотека `tabulate`)
- Обработка ошибок с понятными сообщениями

## Пример CSV-файла
```
name,brand,price,rating
iphone 15 pro,apple,999,4.9
galaxy s23 ultra,samsung,1199,4.8
redmi note 12,xiaomi,199,4.6
poco x5 pro,xiaomi,299,4.4
```

## Примеры запуска

Показать все строки:
```
python3 main.py --file products.csv
```

Фильтрация по числовой колонке:
```
python3 main.py --file products.csv --where "rating>4.7"
```

Фильтрация по строковой колонке:
```
python3 main.py --file products.csv --where "brand=apple"
```

Агрегация (среднее значение):
```
python3 main.py --file products.csv --aggregate "rating=avg"
```

Фильтрация и агрегация вместе:
```
python3 main.py --file products.csv --where "brand=xiaomi" --aggregate "rating=min"
```

## Требования
- Python 3.7+
- Установка зависимостей:
  ```
  pip install -r requirements.txt
  ```

- Для тестов: pytest
  ```
  pip install pytest
  ```

## Тестирование
Для запуска тестов:
```
pytest
```

## Архитектура и расширяемость
- Легко добавить новые типы агрегаций или команд (см. файл `csv_processor.py`)
- Код покрыт тестами (см. `test_csv_processor.py`)

## Ошибки и ограничения
- Фильтрация и агрегация поддерживаются только по одной колонке за раз
- Операторы фильтрации: только `=`, `<`, `>`
- Агрегация только по числовым колонкам
- Входные файлы должны быть валидными CSV
